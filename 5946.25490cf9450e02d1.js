"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5946],{5946:(X,f,c)=>{c.r(f),c.d(f,{PantryPageModule:()=>G});var p=c(177),d=c(4341),o=c(5150),m=c(70),g=c(467),t=c(4438),u=c(3624),_=c(7376);function I(n,s){if(1&n&&(t.j41(0,"ion-item"),t.EFF(1),t.k0s()),2&n){const a=s.$implicit;t.R7$(),t.JRh(a.name)}}let y=(()=>{var n;class s{constructor(e){this.mc=e}ngOnInit(){}close(){return this.mc.dismiss(!1,"cancel")}confirm(){return this.mc.dismiss(!0,"confirm")}}return(n=s).\u0275fac=function(e){return new(e||n)(t.rXU(o.W3))},n.\u0275cmp=t.VBU({type:n,selectors:[["app-expiration-notification"]],inputs:{expiringItems:"expiringItems"},standalone:!0,features:[t.aNF],decls:17,vars:1,consts:[[4,"ngFor","ngForOf"],["slot","start",3,"click"],["slot","end",3,"click"]],template:function(e,i){1&e&&(t.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),t.EFF(3,"Expired Items"),t.k0s()()(),t.j41(4,"ion-content")(5,"p"),t.EFF(6,"The following items have expired: "),t.k0s(),t.j41(7,"ion-list"),t.DNE(8,I,2,1,"ion-item",0),t.k0s(),t.j41(9,"p"),t.EFF(10,"Remove from pantry list?"),t.k0s()(),t.j41(11,"ion-footer")(12,"ion-toolbar")(13,"ion-button",1),t.bIt("click",function(){return i.close()}),t.EFF(14,"Close"),t.k0s(),t.j41(15,"ion-button",2),t.bIt("click",function(){return i.confirm()}),t.EFF(16,"Remove Items"),t.k0s()()()),2&e&&(t.R7$(8),t.Y8G("ngForOf",i.expiringItems))},dependencies:[o.bv,o.Jm,o.W9,o.M0,o.eU,o.uz,o.nf,o.BC,o.ai,p.MD,p.Sq]}),s})();var P=c(342),x=c(1266),E=c(9183);const v=["pantryList"];function b(n,s){1&n&&t.nrm(0,"div",12,0)}function k(n,s){if(1&n){const a=t.RV6();t.j41(0,"div",13)(1,"ion-grid")(2,"ion-row",14)(3,"ion-col",15)(4,"ion-button",16),t.bIt("mouseup",function(){t.eBV(a);const i=t.XpG();return t.Njj(i.deleteSelected())}),t.EFF(5,"Delete Items"),t.k0s(),t.j41(6,"ion-button",16),t.bIt("mouseup",function(){t.eBV(a);const i=t.XpG();return t.Njj(i.addSelectedtoShopping())}),t.EFF(7,"Add Items to Shopping List"),t.k0s()()()()()}}function D(n,s){1&n&&(t.j41(0,"ion-card")(1,"ion-card-header")(2,"ion-card-title"),t.EFF(3,"Pantry Inventory"),t.k0s()(),t.j41(4,"ion-list")(5,"ion-item"),t.EFF(6," List is Empty. "),t.k0s()()())}function F(n,s){if(1&n&&t.nrm(0,"ion-icon",25),2&n){const a=t.XpG().$implicit;t.xc7("color",a.expColor)}}function S(n,s){1&n&&t.nrm(0,"ion-icon",26),2&n&&t.xc7("color","red")}function C(n,s){if(1&n){const a=t.RV6();t.j41(0,"ion-item",19)(1,"ion-checkbox",20),t.mxI("ngModelChange",function(i){const r=t.eBV(a).$implicit;return t.DH7(r.selected,i)||(r.selected=i),t.Njj(i)}),t.bIt("ionChange",function(){const i=t.eBV(a).$implicit,r=t.XpG(4);return t.Njj(r.updateSelection(i))}),t.k0s(),t.j41(2,"p",21),t.EFF(3),t.k0s(),t.j41(4,"p",22),t.EFF(5),t.k0s(),t.DNE(6,F,1,2,"ion-icon",23)(7,S,1,2,"ion-icon",24),t.k0s()}if(2&n){const a=s.$implicit;t.R7$(),t.R50("ngModel",a.selected),t.R7$(2),t.JRh(a.name),t.R7$(2),t.JRh(a.expirationToString()),t.R7$(),t.Y8G("ngIf",a.daysUntilExpire>0),t.R7$(),t.Y8G("ngIf",a.daysUntilExpire<=0)}}function T(n,s){if(1&n&&(t.j41(0,"ion-item-group")(1,"ion-item-divider")(2,"ion-label"),t.EFF(3),t.k0s()(),t.DNE(4,C,8,5,"ion-item",18),t.k0s()),2&n){const a=t.XpG().$implicit,e=t.XpG(2);t.R7$(3),t.JRh(a),t.R7$(),t.Y8G("ngForOf",e.getItemsByCategory(a))}}function R(n,s){if(1&n&&(t.j41(0,"ion-list",null,1),t.DNE(2,T,5,2,"ion-item-group",8),t.k0s()),2&n){const a=s.$implicit,e=t.XpG(2);t.R7$(2),t.Y8G("ngIf",e.pantryHasCategory(a))}}function M(n,s){if(1&n&&(t.j41(0,"div"),t.DNE(1,R,3,1,"ion-list",17),t.k0s()),2&n){const a=t.XpG();t.R7$(),t.Y8G("ngForOf",a.categories)}}const j=[{path:"",component:(()=>{var n;class s{constructor(e,i,r,l,h,N,B,$,w){this.route=e,this.router=i,this.mc=r,this.shoppingService=l,this.ps=h,this.es=N,this.gestureCtrl=B,this.el=$,this.cdRef=w,this.pantryItems=new Map,this.itemsSelected=[],this.expiringItems=[],this.totalEntries=0,this.toolbarState="pantry",this.selectState="selectAll",this.pantryIsOccupied=!1,this.categories=u.E.categories,this.modalOpened=!1,this.blurBackground=!1}ngOnInit(){var e=this;this.route.queryParams.subscribe(function(){var r=(0,g.A)(function*(l){"true"===l.addItem&&(e.modalOpened=!0,yield e.addPantryItem(),e.clearQueryParams())});return function(l){return r.apply(this,arguments)}}()),this.pantryItems=this.ps.getPantryList(),this.totalEntries=this.pantryItems.size,this.pantryIsOccupied=this.pantryItems.size>0,[{name:"Apple",category:"Fruits",expirationDate:new Date("2024-06-4")},{name:"Banana",category:"Fruits",expirationDate:new Date("2024-06-30")},{name:"Spinach",category:"Vegetables",expirationDate:new Date("2024-06-3")},{name:"Milk",category:"Dairy",expirationDate:new Date("2024-06-1")},{name:"Beef",category:"Meats",expirationDate:new Date("2024-07-02")},{name:"Salmon",category:"Seafood",expirationDate:new Date("2024-07-05")},{name:"Rice",category:"Grains and Cereals",expirationDate:new Date("2024-07-15")},{name:"Bread",category:"Bread and Bakery",expirationDate:new Date("2024-07-12")},{name:"Pasta",category:"Pantry Goods",expirationDate:new Date("2024-07-15")},{name:"Ice Cream",category:"Frozen Foods",expirationDate:new Date("2024-06-07")},{name:"Orange Juice",category:"Beverages",expirationDate:new Date("2024-07-25")},{name:"Chips",category:"Snacks",expirationDate:new Date("2024-07-28")},{name:"Ketchup",category:"Condiments",expirationDate:new Date("2024-08-01")},{name:"Salt",category:"Seasonings",expirationDate:new Date("2024-08-05")},{name:"Olive Oil",category:"Oils and Vinegars",expirationDate:new Date("2024-08-10")}].forEach(r=>{const l=new u.E(r.name,r.category,r.expirationDate);this.addToCategory(l)})}ngAfterViewInit(){this.checkForExpiringItems(),this.gestureCtrl.create({el:this.pantryList.nativeElement.closest("ion-content"),onStart:()=>this.onStart(),onMove:i=>this.onMove(i),onEnd:()=>this.onEnd(),gestureName:"testing",blurOnStart:!0}).enable()}onStart(){console.log("STARTED"),this.itemsSelected.length>0&&(this.blurBackground=!0),this.cdRef.detectChanges()}onMove(e){console.log("MOVING")}onEnd(){console.log("ENDED"),this.blurBackground=!1,this.cdRef.detectChanges()}clearQueryParams(){this.router.navigate([],{relativeTo:this.route,queryParams:{addItem:null},queryParamsHandling:"merge"})}addPantryItem(){var e=this;return(0,g.A)(function*(){const i=yield e.mc.create({component:_.Y,componentProps:{type:"Pantry"}});i.present();const{data:r,role:l}=yield i.onWillDismiss();"confirm"===l&&e.addToCategory(r)})()}addToCategory(e){this.ps.addPantryItem(e.category,e),this.updatePantryState()}checkForExpiringItems(){this.expiringItems=[],this.pantryItems.forEach(e=>{e.forEach(i=>{i.daysUntilExpire<=0&&this.expiringItems.push(i)})}),this.expiringItems.length>0&&this.showExpiringItemsModal()}showExpiringItemsModal(){var e=this;return(0,g.A)(function*(){const i=yield e.mc.create({component:y,componentProps:{expiringItems:e.getExpiringItems()}});i.present();const{role:l}=yield i.onWillDismiss();"confirm"===l&&e.expiringItems.forEach(h=>e.deleteItem(h))})()}updatePantryState(){this.pantryItems=this.ps.getPantryList(),this.totalEntries=Array.from(this.pantryItems.values()).reduce((e,i)=>e+i.length,0),this.pantryIsOccupied=this.totalEntries>0}pantryHasCategory(e){return this.pantryItems.has(e)&&this.pantryItems.get(e).length>0}getItemsByCategory(e){return this.pantryItems.get(e)||[]}updateSelection(e){e.selected?this.itemsSelected.push(e):this.itemsSelected.splice(this.itemsSelected.indexOf(e),1)}setSelectState(e){this.selectState=e}selectAll(e){this.pantryItems.forEach(i=>{u.E.selectedAll(i,e),i.forEach(r=>this.updateSelection(r))}),this.setSelectState(this.itemsSelected.length==this.totalEntries?"deselectAll":"selectAll")}deleteItem(e){const i=this.pantryItems.get(e.category);i.splice(i.indexOf(e),1),this.totalEntries--,this.removeExpirtionTracking(e),0==this.totalEntries&&(this.pantryIsOccupied=!1)}deleteSelected(){this.pantryItems.forEach((e,i)=>{e.forEach(r=>{r.selected&&this.deleteItem(r)})})}addToShoppingList(e){this.shoppingService.itemIsInList(e)||this.shoppingService.addItemToList(e)}addSelectedtoShopping(){this.pantryItems.forEach(e=>{e.forEach(i=>{i.selected&&this.addToShoppingList(i)})})}addExpirationTracking(e){Array.isArray(e)?e.forEach(i=>{this.es.isItemTracked(i)||this.es.trackItem(i)}):this.es.isItemTracked(e)||this.es.trackItem(e)}removeExpirtionTracking(e){Array.isArray(e)?e.forEach(i=>{this.es.removeItemTracking(i)}):this.es.removeItemTracking(e)}getExpiringItems(){return this.expiringItems}}return(n=s).\u0275fac=function(e){return new(e||n)(t.rXU(m.nX),t.rXU(m.Ix),t.rXU(o.W3),t.rXU(P._),t.rXU(x.Q),t.rXU(E.x),t.rXU(o.wH),t.rXU(t.aKT),t.rXU(t.gRc))},n.\u0275cmp=t.VBU({type:n,selectors:[["app-pantry"]],viewQuery:function(e,i){if(1&e&&t.GBs(v,5,t.aKT),2&e){let r;t.mGM(r=t.lsd())&&(i.pantryList=r.first)}},decls:16,vars:6,consts:[["coverblur",""],["pantryList",""],["id","coverblur",4,"ngIf"],["id","blurOptions",4,"ngIf"],[3,"translucent"],[3,"fullscreen"],["collapse","condense"],["size","large"],[4,"ngIf"],["horizontal","center","vertical","bottom","slot","fixed"],["id","pantryAddModal",3,"click"],["name","add"],["id","coverblur"],["id","blurOptions"],[1,"ion-align-items-center"],[1,"ion-text-center","gx-0"],["size","large",3,"mouseup"],[4,"ngFor","ngForOf"],["class","noselect",4,"ngFor","ngForOf"],[1,"noselect"],["slot","start",3,"ngModelChange","ionChange","ngModel"],[2,"font-size","medium"],["slot","end",2,"font-size","small"],["slot","end","name","nutrition",3,"color",4,"ngIf"],["name","alert-outline","slot","end",3,"color",4,"ngIf"],["slot","end","name","nutrition"],["name","alert-outline","slot","end"]],template:function(e,i){1&e&&(t.DNE(0,b,2,0,"div",2)(1,k,8,0,"div",3),t.j41(2,"ion-header",4)(3,"ion-toolbar")(4,"ion-title"),t.EFF(5,"Pantry"),t.k0s()()(),t.j41(6,"ion-content",5)(7,"ion-header",6)(8,"ion-toolbar")(9,"ion-title",7),t.EFF(10,"Pantry"),t.k0s()()(),t.DNE(11,D,7,0,"ion-card",8)(12,M,2,1,"div",8),t.j41(13,"ion-fab",9)(14,"ion-fab-button",10),t.bIt("click",function(){return i.addPantryItem()}),t.nrm(15,"ion-icon",11),t.k0s()()()),2&e&&(t.Y8G("ngIf",i.blurBackground),t.R7$(),t.Y8G("ngIf",i.blurBackground),t.R7$(),t.Y8G("translucent",!0),t.R7$(4),t.Y8G("fullscreen",!0),t.R7$(5),t.Y8G("ngIf",!i.pantryIsOccupied),t.R7$(),t.Y8G("ngIf",i.pantryIsOccupied))},dependencies:[p.Sq,p.bT,d.BC,d.vS,o.Jm,o.b_,o.ME,o.tN,o.eY,o.hU,o.W9,o.Q8,o.YW,o.lO,o.eU,o.iq,o.uz,o.Dg,o.jh,o.he,o.nf,o.ln,o.BC,o.ai,o.hB],styles:[".noselect[_ngcontent-%COMP%]{-webkit-touch-callout:none;-webkit-user-select:none;user-select:none}#coverblur[_ngcontent-%COMP%]{display:flex;position:absolute;z-index:1000;left:0;background-color:#00000041;width:100%;height:100%;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px)}#blurOptions[_ngcontent-%COMP%]{z-index:1001;position:absolute;left:0;right:0;bottom:50px;margin:auto}"]}),s})()}];let O=(()=>{var n;class s{}return(n=s).\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.$C({type:n}),n.\u0275inj=t.G2t({imports:[m.iI.forChild(j),m.iI]}),s})(),G=(()=>{var n;class s{}return(n=s).\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.$C({type:n}),n.\u0275inj=t.G2t({imports:[p.MD,d.YN,o.bv,O,y]}),s})()}}]);